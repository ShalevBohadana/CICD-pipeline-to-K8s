# ðŸš€ CI/CD Pipeline to Kubernetes on AWS


> **Portfolio Project** â€¢ end-to-end DevOps pipeline that builds, tests, and deploys a Node.js â€œHello Worldâ€ service onto AWS EKS using Terraform, Jenkins, and Argo CD.  

---

## âœ¨ Project Overview

This repository demonstrates an enterprise-grade CI/CD workflow:

1. **Infrastructure as Code**  
   - **Terraform** modules define a production VPC (public & private subnets, NAT gateway, routing), an EKS cluster with worker node groups, an ECR registry, and a Jenkins CI server.  
   - Remote state is stored in S3 + DynamoDB with lifecycle and locking policies.  
   - A two-phase â€œbootstrapâ€ pattern separates IAM role creation from workload provisioning, avoiding circular dependencies and enforcing least-privilege.

2. **Continuous Integration**  
   - **Jenkins** runs in a private Dev VPC. A declarative `Jenkinsfile` checkout, builds the Node.js app, runs tests, builds a Docker image, and pushes it to ECR.

3. **Continuous Delivery & GitOps**  
   - **Argo CD** in the EKS cluster watches the `k8s/` folder in Git.  
   - Any updates to Kubernetes manifests (Deployment, Service) automatically reconcile the live cluster to your desired state.

4. **Application Best Practices**  
   - Namespaced deployment (`production`) with rolling updates.  
   - Resource requests/limits, readiness & liveness probes.  
   - Pod anti-affinity for high availability.  
   - Non-root containers and fine-grained IAM roles for security.




## ðŸŒ² Repository Layout

```text
ðŸ“¦ ci-cd-pipeline-to-k8s
â”œâ”€â”€ ðŸ“‚ app/                    # Node.js â€œHello Worldâ€ service
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ src/index.js          # Simple Express server
â”œâ”€â”€ ðŸ“‚ k8s/                    # Kubernetes manifests (YAML)
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â””â”€â”€ service.yaml
â”œâ”€â”€ ðŸ“‚ infra/                  # Terraform infrastructure
â”‚   â”œâ”€â”€ ðŸ“‚ state/              # Terraform remoteâ€state (S3 & DynamoDB)
â”‚   â”œâ”€â”€ ðŸ“‚ bootstrap/          # IAM role bootstrap for Terraform/Jenkins
â”‚   â”œâ”€â”€ ðŸ“‚ modules/            # Reusable modules: vpc, eks, ecr, jenkins
â”‚   â”œâ”€â”€ backend.hcl            # Remoteâ€state config
â”‚   â”œâ”€â”€ providers.tf           # AWS provider (assume-role for CI)
â”‚   â”œâ”€â”€ main.tf                # Root module orchestration
â”‚   â”œâ”€â”€ variables.tf           # Root variables
â”‚   â”œâ”€â”€ locals.tf              # Common locals (tags, naming)
â”‚   â””â”€â”€ outputs.tf             # Exposed outputs
â”œâ”€â”€ ðŸ“„ Jenkinsfile             # Jenkins pipeline definition
â””â”€â”€ ðŸ“„ README.md               # Project overview
```

## ðŸ“š Next Steps & Roadmap

* [ ] Install and configure **Argo CD** in EKS
* [ ] Add **Horizontal Pod Autoscaler** for sample-app
* [ ] Secure Jenkins behind an **Application Load Balancer** + IAM auth
* [ ] Implement **unit and integration tests** in the Jenkins pipeline
* [ ] Configure **monitoring & alerts** (Prometheus + Grafana)

---

> âš ï¸ **Work in Progress**
> This README and the accompanying Terraform & CI/CD setup are ongoingâ€”expect updates and improvements!

---

> *Crafted by Shalev Bohadana as a portfolio project demonstrating enterprise-grade DevOps practices.*
